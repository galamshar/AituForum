(this["webpackJsonpreact-api"]=this["webpackJsonpreact-api"]||[]).push([[0],{104:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),r=n(48),i=n.n(r),o=n(27),l=n(4),d=n(5),u=n(7),j=n(6),h=(n(55),n(10)),p=(n(20),n(2)),b=n(8),m=n(13),O=n.n(m);function f(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var g="http://localhost:8080/api/",x=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"login",value:function(e,t){var n=new FormData;return n.append("login",e),n.append("password",t),O.a.post(g+"auth/sign-in",n,{headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){if(e.data.token){var t=new Date;t.setHours(t.getHours()+1),localStorage.setItem("expiration",JSON.stringify(t)),localStorage.setItem("user",JSON.stringify(e.data))}return e.data}))}},{key:"register",value:function(e,t){var n=new FormData;return n.append("login",e),n.append("password",t),O.a.post(g+"auth/register",n,{headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){return O.a.get(g+"auth/logout",{headers:{Authorization:f().Authorization}}).then((function(){localStorage.clear(),window.location.href="/login"}))}},{key:"changePassword",value:function(e){return O.a.post(g+"auth/change-password",{password:e})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"isLoggedIn",value:function(){return null!=this.getCurrentUser()}}]),e}();setInterval((function(){JSON.parse(localStorage.getItem("expiration"))<new Date&&(localStorage.removeItem("user"),localStorage.removeItem("expiration"))}),9e5);var v=new x,N=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={currentUser:v.getCurrentUser()},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.currentUser;return Object(a.jsx)("header",{id:"#top",children:Object(a.jsxs)(p.Grid,{className:"row",children:[Object(a.jsx)(p.Cell,{large:4,className:"column lpad",children:Object(a.jsx)(p.Cell,{className:"logo",children:Object(a.jsx)("a",{href:"/",children:Object(a.jsx)("img",{src:"https://astanait.edu.kz/wp-content/uploads/2020/05/aitu-logo-white-2-300x154.png",alt:"aitu",width:"100px",height:""})})})}),Object(a.jsx)(p.Cell,{alignment:p.Alignments.RIGHT,large:8,className:"column ar lpad",children:Object(a.jsxs)("nav",{className:"menu",children:[Object(a.jsx)(b.b,{to:"#",children:"Members"}),Object(a.jsx)(b.b,{to:"#",children:"Forum Actions"}),Object(a.jsx)(b.b,{to:"#",children:"FAQ"}),Object(a.jsx)(b.b,{to:"#",children:"Contact"}),null!=e?Object(a.jsx)(b.b,{to:"/profile/"+e.userId,children:e.login}):Object(a.jsx)("a",{href:"/login",children:"Login"}),Object(a.jsx)(b.b,{to:"#",onClick:v.logout,children:"Logout"})]})})]})})}}]),n}(c.a.Component),C=n(11),w=n(29),y=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsx)(p.Grid,{className:"row",children:Object(a.jsx)(p.Breadcrumbs,{large:12,className:"column lpad top-msg",children:Object(a.jsx)(p.BreadcrumbItem,{children:Object(a.jsx)("a",{href:"/",children:Object(a.jsx)(C.a,{icon:w.a})})})})})}}]),n}(c.a.Component),k=n(31),S=n.n(k),I=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"onClickToggle",value:function(){S()("a[data-connect]").unbind().click((function(){var e=S()(this).find("i");e.hasClass("fas fa-arrow-circle-up")?e.removeClass("fas fa-arrow-circle-up").addClass("fas fa-arrow-circle-down"):e.removeClass("fas fa-arrow-circle-down").addClass("fas fa-arrow-circle-up"),S()(this).parent().parent().toggleClass("all").next().slideToggle()}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(p.Grid,{large:12,className:"forum-category rounded top",children:[Object(a.jsx)(p.Cell,{large:8,small:10,className:"column lpad",children:this.props.rtopic}),Object(a.jsx)(p.Cell,{large:4,small:2,className:"column lpad ar",children:Object(a.jsx)("a",{"data-connect":!0,className:"toggler",onClick:function(){return e.onClickToggle()},children:Object(a.jsx)("i",{className:"fas fa-arrow-circle-up"})})})]})}}]),n}(c.a.Component),T=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(p.Grid,{className:"forum-head row",large:12,children:[Object(a.jsx)(p.Cell,{large:8,small:8,className:"column lpad",children:"Forums"}),Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:"Threads"}),Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:"Post"}),Object(a.jsx)(p.Cell,{large:2,small:4,className:"column lpad",children:"Freshness"})]})}}]),n}(c.a.Component),P=n(21),L="http://localhost:8080/api/",A=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"getRootTopics",value:function(e,t){return O.a.get(L+"topics/root-topics",{params:{pageNumber:e,pageSize:t}}).then((function(e){return e.data}))}},{key:"getSubTopics",value:function(e,t,n){return O.a.get(L+"topics/sub-topics",{params:{topicId:e,pageNumber:t,pageSize:n}}).then((function(e){return e.data}))}},{key:"getCountOfPosts",value:function(e){return O.a.get(L+"topics/posts-count/"+e).then((function(e){return e.data}))}},{key:"createSubtopic",value:function(e,t,n){var a=new FormData;return a.append("parentTopicId",e),a.append("name",t),a.append("description",n),a.append("canOwnPosts",!0),a.append("rolesAllowedToRead","Student"),a.append("rolesAllowedToWrite","Student"),O.a.post(L+"topics/create-subtopic",a,{headers:{Authorization:f().Authorization}})}}]),e}()),D=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={countOfSubtopics:{},countOfPosts:{}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.subtopics.map((function(t){A.getSubTopics(t.id,1,100).then((function(n){e.setState((function(e){var a=Object.assign({},e.countOfSubtopics);return a[t.id]=n.items.length,{countOfSubtopics:a}}))})).then((function(){A.getCountOfPosts(t.id).then((function(n){e.setState((function(e){var a=Object.assign({},e.countOfPosts);return a[t.id]=n,{countOfPosts:a}}))}))}))}))}},{key:"render",value:function(){var e=this,t=[];return this.props.subtopics.map((function(n){t.push(Object(a.jsxs)(p.Grid,{large:12,className:"forum-topic",children:[Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:Object(a.jsx)(C.a,{icon:P.b})}),Object(a.jsxs)(p.Cell,{large:7,small:8,className:"column lpad",children:[Object(a.jsx)("span",{className:"overflow-control",children:Object(a.jsx)(b.b,{to:"/forum/".concat(n.id),children:n.name})}),Object(a.jsx)("span",{className:"overflow-control",children:n.description})]}),Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:Object(a.jsx)("span",{className:"center",children:e.state.countOfSubtopics[n.id]})}),Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:Object(a.jsx)("span",{className:"center",children:e.state.countOfPosts[n.id]})}),Object(a.jsxs)(p.Cell,{large:2,small:4,className:"column pad",children:[Object(a.jsx)("span",{children:Object(a.jsx)("a",{href:"#",children:"Some sub-topic"})}),Object(a.jsx)("span",{children:"08-29-2013 7:29PM"}),Object(a.jsxs)("span",{children:["by ",Object(a.jsx)("a",{to:"#",children:"Some user"})]})]})]},parseInt("".concat(n.parentTopicId).concat(n.id))))})),t}}]),n}(c.a.Component),R=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={isLoadedRoot:!1,error:null,rtopics:[],isLoadedSubtopics:!1,subtopics:[]},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:8080/api/topics/root-topics/?pageNumber=1&pageSize=10").then((function(e){return e.json()})).then((function(t){e.setState({isLoadedRoot:!0,rtopics:t.items})}),(function(t){e.setState({isLoadedRoot:!0,error:t})})).then((function(t){var n=[];e.state.rtopics.map((function(e){return n.push("http://localhost:8080/api/topics/sub-topics/?topicId="+e.id+"&pageNumber=1&pageSize=10")}));var a=n.map((function(e){return fetch(e)}));Promise.all(a).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(t){var n=[];t.map((function(e){return e.items.map((function(e){return n.push(e)}))})),e.setState({isLoadedSubtopics:!0,subtopics:n})}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoadedRoot,s=e.rtopics,c=e.isLoadedSubtopics,r=e.subtopics;if(t)return Object(a.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",t.message]});if(n&&c){var i=[];return s.map((function(e){var t=[];r.map((function(n){n.parentTopicId==e.id&&t.push(n)})),i.push(Object(a.jsxs)("div",{className:"row mb",children:[Object(a.jsx)(I,{rtopic:e.name}),Object(a.jsxs)(p.Row,{className:"toggleview",children:[Object(a.jsx)(T,{}),Object(a.jsx)(D,{subtopics:t})]})]},e.id))})),i}return Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}}]),n}(c.a.Component),F=n(14),M=n(24),B=(n(104),n(22)),U=n.n(B),z=n(26),H=n.n(z),G=n(37),J=n.n(G),E=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:Object(a.jsx)("span",{children:"This field is required!"})})},Y=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(F.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(F.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(F.a)(a)),a.rightActive=a.rightActive.bind(Object(F.a)(a)),a.rightInActive=a.rightInActive.bind(Object(F.a)(a)),a.onClickLoginBtn=a.onClickLoginBtn.bind(Object(F.a)(a)),a.onClickRegBtn=a.onClickRegBtn.bind(Object(F.a)(a)),a.state={username:"",password:"",loading:!1,message:"",isRightActive:!1,action:null},a}return Object(d.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onClickLoginBtn",value:function(e){this.setState({action:"login"})}},{key:"onClickRegBtn",value:function(e){this.setState({action:"register"})}},{key:"rightActive",value:function(e){this.setState((function(e){return{isRightActive:!0,username:"",password:"",message:"",action:"register"}}))}},{key:"rightInActive",value:function(e){this.setState({isRightActive:!1,username:"",password:"",message:"",action:"login"})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length||0===this.checkBtn2.context._errors.length?"login"==this.state.action?v.login(this.state.username,this.state.password).then((function(e){e?(t.props.history.push("/"),window.location.reload()):t.setState({loading:!1,message:"Incorrect login or password!",action:null})}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:n,action:null})})):v.register(this.state.username,this.state.password).then((function(e){e?(t.props.history.push("/"),window.location.reload()):t.setState({loading:!1,message:"This account already exist!",action:null})}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,action:null,message:n})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"login-page",children:[Object(a.jsx)("a",{href:"/",children:Object(a.jsx)("h2",{children:"AITU FORUM"})}),Object(a.jsxs)("div",{className:"container ".concat(this.state.isRightActive?"right-panel-active":""),id:"container",children:[Object(a.jsx)("div",{className:"form-container sign-up-container",children:Object(a.jsxs)(U.a,{method:"post",id:"registerform",onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(a.jsx)("h1",{children:"Create Account"}),Object(a.jsxs)("div",{className:"social-container",children:[Object(a.jsx)("a",{href:"#",className:"social",children:Object(a.jsx)(C.a,{icon:M.a})}),Object(a.jsx)("a",{href:"#",className:"social",children:Object(a.jsx)(C.a,{icon:M.b})}),Object(a.jsx)("a",{href:"#",className:"social",children:Object(a.jsx)(C.a,{icon:M.c})})]}),Object(a.jsx)("span",{children:"or use your email for registration"}),Object(a.jsx)(H.a,{type:"text",placeholder:"Username",id:"username",name:"username",min:"3",max:"16",value:this.state.username,onChange:this.onChangeUsername,validations:[E]}),Object(a.jsx)(H.a,{type:"password",placeholder:"Password",id:"password",name:"password",min:"3",max:"16",value:this.state.password,onChange:this.onChangePassword,validations:[E]}),Object(a.jsx)("button",{id:"signup",type:"submit",name:"signup",disabled:this.state.loading,onClick:this.onClickRegBtn,children:"Sign Up"}),Object(a.jsx)("br",{}),Object(a.jsx)("span",{id:"register-errormsg"}),Object(a.jsx)(J.a,{style:{display:"none"},ref:function(t){e.checkBtn2=t}})]})}),Object(a.jsx)("div",{className:"form-container sign-in-container",children:Object(a.jsxs)(U.a,{id:"login-form",onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(a.jsx)("h1",{children:"Sign in"}),Object(a.jsxs)("div",{className:"social-container",children:[Object(a.jsx)("a",{href:"#",className:"social",children:Object(a.jsx)(C.a,{icon:M.a})}),Object(a.jsx)("a",{href:"#",className:"social",children:Object(a.jsx)(C.a,{icon:M.b})}),Object(a.jsx)("a",{href:"#",className:"social",children:Object(a.jsx)(C.a,{icon:M.c})})]}),Object(a.jsx)("span",{children:"or use your account"}),Object(a.jsx)(H.a,{type:"text",placeholder:"Username",id:"login",name:"login",min:"3",max:"32",value:this.state.username,onChange:this.onChangeUsername,validations:[E]}),Object(a.jsx)(H.a,{type:"password",placeholder:"Password",id:"password",name:"password",min:"3",max:"16",value:this.state.password,onChange:this.onChangePassword,validations:[E]}),Object(a.jsx)("a",{href:"#",children:"Forgot your password?"}),Object(a.jsx)("button",{id:"signin",type:"submit",name:"signin",disabled:this.state.loading,onClick:this.onClickLoginBtn,children:"Sign In"}),Object(a.jsx)("br",{}),this.state.message&&Object(a.jsx)("span",{id:"login-errormsg",children:this.state.message}),Object(a.jsx)(J.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})}),Object(a.jsx)("div",{className:"overlay-container",children:Object(a.jsxs)("div",{className:"overlay",children:[Object(a.jsxs)("div",{className:"overlay-panel overlay-left",children:[Object(a.jsx)("h1",{children:"Welcome Back!"}),Object(a.jsx)("p",{children:"To keep connected with us please login with your personal info"}),Object(a.jsx)("button",{className:"ghost",id:"signIn",onClick:this.rightInActive,children:"Sign In"})]}),Object(a.jsxs)("div",{className:"overlay-panel overlay-right",children:[Object(a.jsx)("h1",{children:"Hello, Friend!"}),Object(a.jsx)("p",{children:"Enter your personal details and start journey with us"}),Object(a.jsx)("button",{className:"ghost",id:"signUp",onClick:this.rightActive,children:"Sign Up"})]})]})})]}),Object(a.jsx)("footer",{children:Object(a.jsx)("p",{children:"\xa9 Copyrights 2020, AITU FORUM. All rights reserved."})})]})}}]),n}(c.a.Component),W=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(p.Grid,{className:"forum-head row",large:12,children:[Object(a.jsx)(p.Cell,{large:8,small:8,className:"column lpad",children:"Threads"}),Object(a.jsx)(p.Cell,{large:2,className:"column lpad",children:"Post"}),Object(a.jsx)(p.Cell,{large:2,small:4,className:"column lpad",children:"Freshness"})]})}}]),n}(c.a.Component),_=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={countOfPosts:{}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.subtopics.map((function(t){A.getCountOfPosts(t.id).then((function(n){e.setState((function(e){var a=Object.assign({},e.countOfPosts);return a[t.id]=n,{countOfPosts:a}}))}))}))}},{key:"render",value:function(){var e=this,t=[];return this.props.subtopics.map((function(n){t.push(Object(a.jsxs)(p.Grid,{large:12,className:"forum-topic",children:[Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:Object(a.jsx)(C.a,{icon:P.b})}),Object(a.jsxs)(p.Cell,{large:7,small:8,className:"column lpad",children:[Object(a.jsx)("span",{className:"overflow-control",children:Object(a.jsx)(b.b,{to:"/thread/".concat(n.id),children:n.name})}),Object(a.jsx)("span",{className:"overflow-control",children:n.description})]}),Object(a.jsx)(p.Cell,{large:2,className:"column lpad",children:Object(a.jsx)("span",{className:"center",children:e.state.countOfPosts[n.id]})}),Object(a.jsxs)(p.Cell,{large:2,small:4,className:"column pad",children:[Object(a.jsx)("span",{children:Object(a.jsx)("a",{href:"#",children:"Some sub-topic"})}),Object(a.jsx)("span",{children:"08-29-2013 7:29PM"}),Object(a.jsxs)("span",{children:["by ",Object(a.jsx)("a",{to:"#",children:"Some user"})]})]})]},parseInt("".concat(n.parentTopicId).concat(n.id))))})),t}}]),n}(c.a.Component),q=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={subtopics:[],threads:[],isLoaded:!1,error:null},a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.location!=this.props.location&&window.location.reload()}},{key:"componentDidMount",value:function(){var e=this;A.getSubTopics(this.props.match.params.subTopicId,1,10).then((function(t){var n=[],a=[];e.setState({isLoaded:!0}),t.items.map((function(e){e.rules.canOwnPosts?a.push(e):n.push(e)})),e.setState({subtopics:n,threads:a})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.subtopics,n=e.isLoaded,s=e.error,c=e.threads;if(s)return Object(a.jsxs)("div",{children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",s.message]});if(n){var r=[];return r.push(Object(a.jsx)("div",{className:"row mb forum",children:Object(a.jsx)(b.b,{to:"/forum/create/"+this.props.match.params.subTopicId,children:Object(a.jsx)("button",{children:"Create Thread"})})})),t.length>0&&r.push(Object(a.jsx)("div",{className:"row mb forum",children:Object(a.jsxs)(p.Row,{className:"toggleview",children:[Object(a.jsx)(T,{}),Object(a.jsx)(D,{subtopics:t})]})},this.props.match.params.subTopicId)),c.length>0&&r.push(Object(a.jsx)("div",{className:"row mb",children:Object(a.jsxs)(p.Row,{className:"toggleview",children:[Object(a.jsx)(W,{}),Object(a.jsx)(_,{subtopics:c})]})},this.props.match.params.subTopicId)),r.length>0?r:Object(a.jsxs)("div",{className:"row mb forum",children:[Object(a.jsx)(b.b,{to:"/forum/create/"+this.props.match.params.subTopicId,children:Object(a.jsx)("button",{children:"Create Thread"})}),Object(a.jsx)(p.Row,{className:"toggleview",children:Object(a.jsx)("span",{children:"Error, the topic is empty"})})]})}return Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}}]),n}(c.a.Component),Q="http://localhost:8080/api/",K=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"getProfile",value:function(e){return O.a.get(Q+"accounts/profile",{params:{accountId:e}},{headers:{Authorization:f().Authorization}}).then((function(e){return e.data}))}},{key:"getProfilePosts",value:function(e){return O.a.get(Q+"accounts/posts",{params:{accountId:e,pageNumber:1,pageSize:10}}).then((function(e){return e.data}))}},{key:"getProfileTopics",value:function(e){return O.a.get(Q+"accounts/topics",{params:{accountId:e,pageNumber:1,pageSize:10}}).then((function(e){return e.data}))}}]),e}()),V=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={isLogged:!0,content:[]},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=[];this.props.posts.map((function(n,s){K.getProfile(n.authorId).then((function(e){var c=Object(a.jsxs)(p.Cell,{large:12,className:"row panel grid-x",children:[Object(a.jsxs)(p.Cell,{large:2,className:"column profile-left",children:[Object(a.jsxs)(p.Cell,{large:10,className:"column prof-element",children:[Object(a.jsx)("img",{src:"https://avatarfiles.alphacoders.com/495/49573.jpg",alt:"avatar"}),Object(a.jsx)(b.b,{to:"/profile/".concat(n.authorId),children:e.login})]}),Object(a.jsxs)(p.Cell,{large:12,className:"column prof-element extra-info",children:[Object(a.jsxs)("dl",{className:"pairs pairs-justified",children:[Object(a.jsx)("dt",{children:"Threads"}),Object(a.jsx)("dd",{children:e.topicCount})]}),Object(a.jsxs)("dl",{className:"pairs pairs-justified",children:[Object(a.jsx)("dt",{children:"Posts"}),Object(a.jsx)("dd",{children:e.postCount})]}),Object(a.jsxs)("dl",{className:"pairs pairs-justified",children:[Object(a.jsx)("dt",{children:"Score"}),Object(a.jsx)("dd",{children:e.score})]})]})]}),Object(a.jsx)(p.Cell,{large:10,className:"column profile-right",children:Object(a.jsxs)(p.Cell,{large:12,className:"column prof-element",children:[Object(a.jsxs)(p.Cell,{large:12,className:"row content-element",children:[Object(a.jsx)("span",{children:n.writtenDate.split("T")[0]}),Object(a.jsx)(b.b,{to:window.location.pathname+"#"+s,id:s,className:"floatr",children:"#".concat(s)})]}),Object(a.jsx)(p.Cell,{large:12,className:"row content-element",children:Object(a.jsx)("span",{children:n.text})}),Object(a.jsx)(p.Cell,{large:12,className:"row content-element content-element-foot"})]})})]},n.id);t.push(c)})).then((function(){e.setState({content:t.sort((function(e,t){return e.key>t.key?1:-1}))})}))}))}},{key:"render",value:function(){return this.state.content}}]),n}(c.a.Component),X="http://localhost:8080/api/",Z=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"getPostById",value:function(e){return O.a.get(X+"posts/by-topic/"+e+"?pageNumber=1&pageSize=100",{headers:{Authorization:f().Authorization}}).then((function(e){return e.data}))}},{key:"getPostByTopicId",value:function(e,t,n){return O.a.get(X+"by-topic/"+e,{params:{pageNumber:t,pageSize:n}})}},{key:"post",value:function(e,t){var n=new FormData;return n.append("topicId",e),n.append("text",t),O.a.post(X+"posts/"+e+"/post",n,{headers:{Authorization:f().Authorization}})}}]),e}()),$=n(30),ee=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeText=a.onChangeText.bind(Object(F.a)(a)),a.postHandler=a.postHandler.bind(Object(F.a)(a)),a.state={text:"",loading:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.textarea.focus(),Object($.a)(this.textarea)}},{key:"onChangeText",value:function(e){this.setState({text:e.target.value})}},{key:"postHandler",value:function(e){e.preventDefault(),this.setState({loading:!0}),Z.post(this.props.topicId,this.state.text).then((function(e){window.location.reload()}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"form-container postform-container",children:Object(a.jsxs)(U.a,{method:"post",id:"postForm",className:"post-form",onSubmit:this.postHandler,ref:function(t){e.form=t},children:[Object(a.jsx)("textarea",{type:"text",placeholder:"Your text here",id:"postcontent",name:"postcontent",min:"3",max:"256",value:this.state.text,onChange:this.onChangeText,ref:function(t){return e.textarea=t}}),Object(a.jsx)("button",{id:"doPost",type:"submit",name:"doPost",disabled:this.state.loading,children:"Post"})]})})}}]),n}(c.a.Component),te=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{large:12,className:"thread-content",children:Object(a.jsxs)(p.Cell,{children:[Object(a.jsx)(p.Cell,{large:12,className:"forum-category rounded top",children:Object(a.jsx)(p.Cell,{large:12,small:12,className:"lpad",children:"WINNERS OF AITU CHALLENGE!"})}),Object(a.jsx)(p.Cell,{large:12,className:"thread-info column",children:Object(a.jsx)(p.Cell,{large:6,className:"column",children:Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)(C.a,{icon:w.b}),Object(a.jsx)(b.b,{to:"profile/",children:"ADMIN"})]}),Object(a.jsxs)("li",{children:[Object(a.jsx)(C.a,{icon:P.a}),Object(a.jsx)("span",{children:"17.11.2020"})]})]})})})]})})}}]),n}(c.a.Component),ne=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={posts:[],isLoaded:!1,error:null,isLogged:!0},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;Z.getPostById(this.props.match.params.postId).then((function(t){e.setState({isLoaded:!0,posts:t.items})}),(function(t){e.setState({isLogged:!1})}))}},{key:"render",value:function(){return this.state.isLogged?this.state.isLoaded?Object(a.jsx)("div",{children:Object(a.jsxs)(p.Grid,{className:"row",children:[Object(a.jsx)(te,{threadInfo:this.props.location.topicInfo}),Object(a.jsx)(V,{posts:this.state.posts}),Object(a.jsx)(ee,{topicId:this.props.match.params.postId})]})}):Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(a.jsx)(h.a,{to:"/login"})}}]),n}(c.a.Component),ae=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e=[];return this.props.posts.map((function(t){var n=new Date(t.writtenDate);e.push(Object(a.jsxs)(p.Grid,{large:12,className:"forum-topic",children:[Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:Object(a.jsx)(C.a,{icon:P.b})}),Object(a.jsxs)(p.Cell,{large:7,small:8,className:"column lpad",children:[Object(a.jsx)("span",{className:"overflow-control",children:Object(a.jsx)(b.b,{to:"/thread/".concat(t.topicId),children:t.text.substring(0,15)})}),Object(a.jsx)("span",{className:"overflow-control",children:"... "+t.text.substring(15,40)})]}),Object(a.jsx)(p.Cell,{large:4,className:"column lpad",children:Object(a.jsx)("span",{className:"center",children:n.getDate()+"/"+n.getMonth()+"/"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()})})]},parseInt("".concat(t.topicId).concat(t.id))))})),e}}]),n}(c.a.Component),se=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){var e=[];return this.props.topics.map((function(t){var n=new Date(t.updatedDate);e.push(Object(a.jsxs)(p.Grid,{large:12,className:"forum-topic",children:[Object(a.jsx)(p.Cell,{large:1,className:"column lpad",children:Object(a.jsx)(C.a,{icon:P.b})}),Object(a.jsxs)(p.Cell,{large:7,small:8,className:"column lpad",children:[Object(a.jsx)("span",{className:"overflow-control",children:Object(a.jsx)(b.b,{to:"/thread/".concat(t.id),children:t.name})}),Object(a.jsx)("span",{className:"overflow-control",children:t.description})]}),Object(a.jsx)(p.Cell,{large:4,className:"column lpad",children:Object(a.jsx)("span",{className:"center",children:n.getDate()+"/"+n.getMonth()+"/"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()})})]},parseInt("".concat(t.id).concat(t.creatorId))))})),e}}]),n}(c.a.Component),ce=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={activeIndex:1,posts:[],isLoadedPosts:!1,topics:[],isLoadedTopics:!1},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;K.getProfilePosts(this.props.accountId).then((function(t){e.setState({posts:t,isLoadedPosts:!0})})),K.getProfileTopics(this.props.accountId).then((function(t){e.setState({topics:t,isLoadedTopics:!0})}))}},{key:"render",value:function(){var e=this;return this.state.isLoadedPosts&&this.state.isLoadedTopics?Object(a.jsxs)("div",{children:[Object(a.jsx)("link",{rel:"stylesheet",type:"text/css",href:"https://cdnjs.cloudflare.com/ajax/libs/foundation/6.5.1/css/foundation-float.min.css"}),Object(a.jsxs)(p.Tabs,{children:[Object(a.jsx)(p.TabItem,{isActive:1===this.state.activeIndex,onClick:function(t){e.setState({activeIndex:1})},children:Object(a.jsx)("a",{href:"#posts",children:"Posts"})}),Object(a.jsx)(p.TabItem,{isActive:2===this.state.activeIndex,onClick:function(t){e.setState({activeIndex:2})},children:Object(a.jsx)("a",{href:"#topics",children:"Topics"})})]}),Object(a.jsxs)(p.TabsContent,{children:[Object(a.jsx)(p.TabPanel,{id:"tab2",isActive:1===this.state.activeIndex,children:Object(a.jsx)(ae,{posts:this.state.posts.items})}),Object(a.jsx)(p.TabPanel,{id:"tab2",isActive:2===this.state.activeIndex,children:Object(a.jsx)(se,{topics:this.state.topics.items})})]})]}):Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}}]),n}(s.Component),re=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={accInfo:[],isLoaded:!1,error:null,isLogged:!0},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;K.getProfile(this.props.match.params.accountId).then((function(t){e.setState({isLoaded:!0,accInfo:t})}),(function(t){e.setState({isLogged:!1})}))}},{key:"render",value:function(){if(!this.state.isLogged)return Object(a.jsx)(h.a,{to:"/login"});if(!this.state.isLoaded)return Object(a.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."});var e=new Date(this.state.accInfo.createOn),t=new Date(this.state.accInfo.lastTime);return Object(a.jsxs)(p.Cell,{className:"row panel grid-x account",children:[Object(a.jsxs)(p.Cell,{large:3,className:"column profile-left",children:[Object(a.jsx)(p.Cell,{large:12,className:"column prof-element",children:Object(a.jsx)("img",{src:"https://avatarfiles.alphacoders.com/495/49573.jpg",alt:"avatar"})}),Object(a.jsx)(p.Cell,{large:12,className:"column prof-element",children:Object(a.jsxs)("div",{className:"info",children:[Object(a.jsxs)("span",{className:"column",children:["Reg.date :"," ",e.getDate()+"/"+e.getMonth()+"/"+e.getFullYear()]}),Object(a.jsxs)("span",{className:"column",children:["Roles :"," ",this.state.accInfo.roles.map((function(e){return e.name+" /"}))]}),Object(a.jsxs)("span",{className:"column",children:["Score : ",this.state.accInfo.score]})]})})]}),Object(a.jsxs)(p.Cell,{large:9,className:"column profile-right",children:[Object(a.jsxs)(p.Cell,{large:12,className:"column prof-element",children:[Object(a.jsxs)(p.Cell,{className:"column prof-head",children:[Object(a.jsx)("span",{children:this.state.accInfo.login}),Object(a.jsx)("span",{className:"floatr",children:t.getDate()+"/"+t.getMonth()+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()})]}),Object(a.jsxs)(p.Cell,{className:"column statistic",children:[Object(a.jsxs)("a",{href:"",className:"page-counter",children:[Object(a.jsx)("div",{className:"count",children:this.state.accInfo.postCount}),Object(a.jsx)("div",{className:"muted",children:"posts"})]}),Object(a.jsxs)("a",{href:"",className:"page-counter",children:[Object(a.jsx)("div",{className:"count",children:this.state.accInfo.topicCount}),Object(a.jsx)("div",{className:"muted",children:"topics"})]})]})]}),Object(a.jsx)(p.Cell,{large:12,className:"column prof-element",children:Object(a.jsx)(ce,{accountId:this.props.match.params.accountId})})]})]})}}]),n}(c.a.Component),ie=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(F.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(F.a)(a)),a.createHandler=a.createHandler.bind(Object(F.a)(a)),a.state={name:"",description:"",loading:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.input.focus(),Object($.a)(this.textarea)}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"createHandler",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),A.createSubtopic(this.props.match.params.parentTopicId,this.state.name,this.state.description).then((function(e){window.location.href="/forum/"+t.props.match.params.parentTopicId}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"form-container postform-container",children:Object(a.jsxs)(U.a,{method:"post",id:"createThread",className:"post-form",onSubmit:this.createHandler,ref:function(t){e.form=t},children:[Object(a.jsx)("input",{type:"text",placeholder:"Thread name",id:"threadname",name:"threadname",min:"5",max:"128",value:this.state.name,onChange:this.onChangeName,ref:function(t){return e.input=t}}),Object(a.jsx)("textarea",{type:"text",placeholder:"Thread description",id:"threaddescription",name:"threaddescription",min:"5",max:"256",value:this.state.description,onChange:this.onChangeDescription,ref:function(t){return e.textarea=t}}),Object(a.jsx)("button",{id:"doPost",type:"submit",name:"doPost",disabled:this.state.loading,children:"Create thread"})]})})})}}]),n}(c.a.Component),oe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)(h.d,{children:[Object(a.jsxs)(h.b,{exact:!0,path:"/",children:[Object(a.jsx)(N,{}),Object(a.jsx)(y,{}),Object(a.jsx)(R,{})]}),Object(a.jsx)(h.b,{exact:!0,path:"/forum/:subTopicId",render:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsx)(y,{}),Object(a.jsx)(q,Object(o.a)({},e))]})}}),Object(a.jsx)(h.b,{path:"/thread/:postId",render:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsx)(y,{}),Object(a.jsx)(ne,Object(o.a)({},e))]})}}),Object(a.jsx)(h.b,{path:"/login",component:Y}),Object(a.jsx)(h.b,{path:"/profile/:accountId",render:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsx)(y,{}),Object(a.jsx)(re,Object(o.a)({},e))]})}}),Object(a.jsx)(h.b,{path:"/forum/create/:parentTopicId",render:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{}),Object(a.jsx)(y,{}),Object(a.jsx)(ie,Object(o.a)({},e))]})}})]})})}}]),n}(c.a.Component),le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,111)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(b.a,{children:Object(a.jsx)(oe,{})}),document.getElementById("root")),le()},20:function(e,t,n){},55:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.707422c6.chunk.js.map